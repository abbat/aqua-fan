# aqua-fan

Проект кулера (вентиляторного охлаждения) для аквариума с крышкой. Изначально разрабатывался для аквариума [EHEIM vivalineLED 126](https://eheim.com/en_GB/aquatics/aquariums/aquariums-fresh-water/vivalineled/vivalineled-126), но это ограничение касается только модели корпуса для печати на 3D принтере (в программно-аппаратную же часть заложено масштабирование на различные конфигурации).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176043032-9bc03607-fb3f-487b-b138-808c0c32084e.jpg' alt='EHEIM vivaline aquarium fan cooler'>
<img src='https://user-images.githubusercontent.com/802583/176043040-47506f47-3a48-41ff-99fd-839eee1d8771.jpg' alt='EHEIM vivaline aquarium fan cooler'>
</p>

## Возможности

* Крепление на короб (крышку). Все коммерческие решения (например [GHL Aquarium Fans](https://www.aquariumcomputer.com/products/ghl-cooling-technology/aquarium-fans-propellerbreeze/), [Aqua Medic Arctic Breeze](https://www.aqua-medic.de/index.php?r=catalog/product&id=66&cid=34)) предполагают крепление блока вентиляторов клипсами на край стекла толщиной до 21 мм. Однако ширина короба аквариума данного типа 26 мм., что делает невозможным крепление на клипсы и потребовало бы открытия крышки (если бы крепление все же было возможно).
* Низкий уровень шума благодаря автоматической регулировке скорости вращения вентиляторов в зависимости от разницы температур (в отличии, например, от контроллеров [Aqua Medic Cool Control](https://www.aqua-medic.de/index.php?r=catalog/product&id=475&cid=34), у которых вентиляторы всегда работают на максимально разрешенной скорости).
* Контроль и подстройка скорости вращения по показаниям тахометров самих вентиляторов. Все коммерческие решения используют регулировку скорости вращения через изменение напряжения питания без использования обратной связи, а для различных моделей вентиляторов зависимость скорости вращения от напряжения может быть нелинейной (например см. спецификацию [be quiet! Pure Wings 2](https://www.bequiet.com/ru/casefans/505)) и разной даже для одной модели вентиляторов в блоке.

## Аппаратное обеспечение

Все платы, датчики и расходники можно приобрести на AliExpress.

* Поддержка от 1 до 3 вентиляторов с управлением скоростью вращения через pwm (4-pin). [Рекомендуется](fan-matrix.md) использовать вентиляторы `Noctua`.
* Плата `Arduino Nano` или `Arduino Mini`. Рекомендуется `Arduino Nano`, т.к. все остальные комплектующие с AliExpress обычно толерантны к питанию 5V и для данной платы не нужен отдельный программатор.
* Датчик температуры воды. [Рекомендуется](sensor-matrix.md) датчик `DS18B20` в пластиковом герметичном исполнении плюс плата-адаптер с подтягивающим резистором, 4-pin разъем `PJ-392A` и 4-pin коннектор 3.5 мм. (разъем и коннектор опциональны, но с ними удобно отключать датчик при обслуживании).
* Разъем питания 5.5 x 2.1 мм. для подключения внешнего адаптера питания плюс (при необходимости) сам адаптер питания на 12V / 1.0 - 1.5A.

Опционально:

* Дисплей `SSD1306 128x64` (ПО может работать без дисплея с конфигурацией заданной на этапе компиляции в `config.h`).
* Сенсорные кнопки `TTP223` (имеют смысл только при наличии дисплея).
* Плата `Wi-Fi Wemos D1 Mini` (имеет смысл при активной разработке или при необходимости доступа к устройству по WiFi) плюс блок питания `DC Power Shield for WEMOS D1 mini` (подойдет любой блок питания на 5V, но именно с этим удобнее монтаж).
* Зуммер ("пищалка") `KY-012` (активный, однотонный) или `KY-006` (пассивный, мелодии) - может использоваться для звуковой индикации ошибок или оповещения о событиях (на данный момент не реализовано).

Дополнительно:

* Металлические вентиляторные решетки под выбранный диаметр вентиляторов (для защиты выпрыгивающей рыбы и пальцев).
* Силиконовые антивибрационные крепления для вентиляторов (для крепления в корпусе и уменьшения шума / вибрации).
* Провода типа `Dupont` и термоусадочные трубки в ассортименте, горячий клеевой пистолет, паяльник и прочие инструменты для монтажа.
