# Аппаратное обеспечение

Все платы, датчики и расходники можно приобрести на AliExpress. Для упрощения поиска в описание добавлены ключевые слова и изображения.

ПО поддерживает от 1 до 3 вентиляторов с управлением скоростью вращения через `pwm` (4-pin). [Рекомендуется](fan-matrix.md) использовать вентиляторы `Noctua` - при хорошей производительности у них минимальный уровень шума (что особенно ценно в ночное время). Вообще, выбор хороших вентиляторов практически полностью определяет "удачность" конструкции - не экономьте на этом пункте.

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176501324-c9331f23-c84c-4d56-8a75-d4e23444d1ac.jpg' alt='Noctua NF-B9 redux-1600 PWM (92mm)' title='Noctua NF-B9 redux-1600 PWM (92mm)'>
</p>

Так же, для уменьшения уровня шума, рекомендуется использовать силиконовые антивибрационные крепления, а для защиты лопастей вентиляторов - решетки. Для подключения вентиляторов используются коннекторы `KF2510-4AW`. Распайка коннекторов приведена в [схеме](schema.md), во время перепрограммирования плат(ы) вентиляторы должны отключаться от общей схемы!

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176414763-9223d1ce-3e33-44ee-b1bf-8d565bbedfc0.jpg' alt='Силиконовые крепления для вентиляторов' title='Силиконовые крепления для вентиляторов'>
<img src='https://user-images.githubusercontent.com/802583/176414746-44da5fe4-bb67-4805-ab6f-735ca33a7a29.jpg' alt='Металлические решетки для вентиляторов' title='Металлические решетки для вентиляторов'>
<img src='https://user-images.githubusercontent.com/802583/176414754-ec051f6f-019e-40e9-a700-23ccd7f4ee07.jpg' alt='4-pin коннкеторы KF2510-4AW для вентиляторов' title='4-pin коннкеторы KF2510-4AW для вентиляторов'>
</p>

В исходном проекте решетки крепятся силиконовыми креплениями непосредственно к вентиляторам, а сами вентиляторы удерживаются выступающей частью силиконовых креплений в специально отведенных внутренних пазах корпуса. Таким образом уменьшается передача вибрации от вентиляторов на корпус и далее на аквариум.

Для нестандартных вариантов крепления вентиляторов под крышкой могут помочь фиксирующие скобы ("пряжки") для объединения вентиляторов в блок, кронштейны для аквариумных светильников (например `NICREW`), поликарбонатные (акриловые) трубки (например `Uxcell`).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176419946-210be87c-d86c-44ee-9781-4f2c85e608c7.jpg' alt='Фиксирующая скоба ("пряжка") для вентилятора' title='Фиксирующая скоба ("пряжка") для вентилятора'>
<img src='https://user-images.githubusercontent.com/802583/176419968-289b363c-5eef-466a-a98f-f49d38a931d3.jpg' alt='Кронштейны для аквариумных светильников NICREW' title='Кронштейны для аквариумных светильников NICREW'>
</p>

Контроллер вентиляторов работает на базе `Arduino Nano` или `Arduino Mini`. Рекомендуется `Arduino Nano`, т.к. для данной платы не потребуется дополнительно приобретать адаптер TTL (в случае его отсутствия). Так же подойдет любая другая плата `ATmega328` (`Arduino Uno`), но из за габаритов ее может не получится разместить в исходном корпусе.

При желании получения доступа по WiFi необходима дополнительная плата `Wi-Fi Wemos D1 Mini` (`ESP8266`). На практике данная возможность полезна только при активной разработке (перепрошивка через `OTA` без необходимости вскрытия корпуса и подключения к плате через USB). В обычной же жизни ("один раз настроил и забыл") эта возможность будет настолько редко востребованной, что усложнение схемы ради нее видится нецелесообразным.

В случае использования двух плат необходим блок питания на 5V. Для этих целей рекомендуется использовать `DC Power Shield for WEMOS D1 mini` (можно использовать любой другой блок питания, но с этим будет удобнее монтаж). В случае использования одноплатной схемы отдельный блок питания так же рекомендуется, но не является обязательным - `Arduino Nano` может быть напрямую запитана от 12V, а мощности ее внутреннего стабилизатора вполне достаточно для питания периферии.

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176437296-5058f2da-f202-4d47-b85e-58d308130220.jpg' alt='Arduino Nano' title='Arduino Nano'>
<img src='https://user-images.githubusercontent.com/802583/176437305-40df8fe2-0f64-428d-840d-b9b2de378f83.jpg' alt='Wi-Fi Wemos D1 Mini' title='Wi-Fi Wemos D1 Mini'>
<img src='https://user-images.githubusercontent.com/802583/176437303-bfb67585-aaad-403e-ae47-30e5b7284f23.jpg' alt='DC Power Shield for WEMOS D1 mini' title='DC Power Shield for WEMOS D1 mini'>
</p>

Питание в корпус подается через стандартный разъем 5.5 x 2.1 мм. от внешнего адаптера питания на 12V / 1A (одна плата) или 1.5А (две платы).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176435924-344d8954-a09b-454f-b4db-42d6dd31335e.jpg' alt='Разъем питания 5.5 x 2.1 мм.' title='Разъем питания 5.5 x 2.1 мм.'>
<img src='https://user-images.githubusercontent.com/802583/176435921-31bfc5c5-c2a6-41b9-904b-b5c28d1fd71a.jpg' alt='Адаптер питания 12V / 2A (EU)' title='Адаптер питания 12V / 2A (EU)'>
</p>

В качестве датчика температуры воды [рекомендуется](sensor-matrix.md) датчик `DS18B20` в пластиковом герметичном исполнении (ключевое слово для поиска `Taidacent DS18B20`).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176454294-fe8db34e-dad3-4ecc-89b3-c7a3c1a94082.jpg' alt='Датчик температуры Taidacent DS18B20' title='Датчик температуры Taidacent DS18B20'>
<img src='https://user-images.githubusercontent.com/802583/176454288-ba2da170-ebb5-49fd-b607-00f94f304944.jpg' alt='Датчик температуры Sonoff DS18B20' title='Датчик температуры Sonoff DS18B20'>
</p>

Дополнительно для подключения датчика потребуются плата-адаптер с подтягивающим резистором, 4-pin разъем `PJ-392A` и 4-pin коннектор 3.5 мм. Разъем и коннектор опциональны, но с ними удобно отключать датчик при обслуживании. Распайка коннектора, совместимая с датчиками `Sonoff`, приведена в [схеме](schema.md).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176441328-9a235204-cc30-41e2-a85c-87fbc4d21cda.jpg' alt='Адаптер для подключения датчика температуры DS18B20' title='Адаптер для подключения датчика температуры DS18B20'>
<img src='https://user-images.githubusercontent.com/802583/176441329-f8b0a781-8918-4035-a8ab-2a3fd13594ce.jpg' alt='4-pin аудио разъем 3.5 мм.' title='4-pin аудио разъем 3.5 мм.'>
<img src='https://user-images.githubusercontent.com/802583/176505753-dfe97e6c-0b69-4909-ad4b-664266acdf81.jpg' alt='4-pin аудио коннкетор 3.5 мм.' title='4-pin аудио коннкетор 3.5 мм.'>
</p>

Дисплей `SSD1306 128x64` с интерфейсом IIC / I2C (4 pin, не путать с интерфейсом SPI - 7 pin). Данные дисплеи представлены в разных цветах (в том числе и с поддержкой двух цветов), рекомендуется использовать одноцветный голубой (не такой яркий ночью как желтый или белый). Наличие дисплея является опциональным, все необходимые параметры для работы ПО можно задать на этапе компиляции в файле конфигурации `config.h`.

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176502565-0f194799-58d8-4faa-ba9f-77eab8292932.jpg' alt='Дисплей SSD1306 128x64 IIC/I2C' title='Дисплей SSD1306 128x64 IIC/I2C'>
</p>

Сенсорные кнопки `TTP223` для конфигурирования температуры, ограничения мощности вентиляторов и других настроек. Кнопки имеют смысл только при наличии дисплея (т.е. так же являются опциональными). Сенсорные кнопки при отличной чувствительности через пластиковый корпус оказались и удобнее и дешевле механических.

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176503312-dd27c420-b06c-432c-9071-d0ebc3bee4a9.jpg' alt='Сенсорные кнопки TTP223' title='Сенсорные кнопки TTP223'>
</p>

Зуммер ("пищалка") `KY-012` (активный, однотонный) или `KY-006` (пассивный, мелодии) - может использоваться для звуковой индикации ошибок или оповещения о событиях (ошибка вентиляторов, критическое повышение температуры и т.д.). На данный момент поддержка зуммеров не реализована в ПО, однако можно подключить пассивный зуммер с учетом возможных будущих доработок.

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176633080-624ae0ac-a471-46a4-9690-524f24c9134a.jpg' alt='Зуммер ("пищалка") KY-012' title='Зуммер ("пищалка") KY-012'>
<img src='https://user-images.githubusercontent.com/802583/176633077-5027b663-8a9b-42f0-b84c-00771e187fd8.jpeg' alt='Зуммер ("пищалка") KY-006' title='Зуммер ("пищалка") KY-006'>
</p>

Для монтажа всех компонентов в корпусе потребуются провода типа `Dupont` (разноцветные), термоусадочные трубки (маленькие с учетом диаметра проводов), паяльник (припой, флюс), мультиметр, горячий клеевой пистолет, и прочие инструменты (кусачки, пинцет). Если вы не занимаетесь схемотехникой, то приобретать все это для разовой задачи не имеет смысла - для пайки десятка проводов будет дешевле обратиться к специалисту или в любой сервисный центр по ремонту техники.
