# Аппаратное обеспечение

Все платы, датчики и расходники можно приобрести на AliExpress.

ПО поддерживает от 1 до 3 вентиляторов с управлением скоростью вращения через `pwm` (4-pin). [Рекомендуется](fan-matrix.md) использовать вентиляторы `Noctua` - при хорошей производительности у них минимальный уровень шума (что особенно ценно в ночное время). Так же, для уменьшения уровня шума, рекомендуется использовать силиконовые анивибрационные крепления, а для защиты лопастей вентиляторов - решетки. Для подключения вентиляторов используются коннекторы `KF2510-4AW` (распайка коннекторов приведена в [схеме](schema.md), во время перепрограммирования плат(ы) вентиляторы должны отключаться от общей схемы!).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176414763-9223d1ce-3e33-44ee-b1bf-8d565bbedfc0.jpg' alt='силиконовые крепления для вентиляторов'>
<img src='https://user-images.githubusercontent.com/802583/176414746-44da5fe4-bb67-4805-ab6f-735ca33a7a29.jpg' alt='металлические решетки для вентиляторов'>
<img src='https://user-images.githubusercontent.com/802583/176414754-ec051f6f-019e-40e9-a700-23ccd7f4ee07.jpg' alt='4-pin коннкеторы KF2510-4AW для вентиляторов'>
</p>

В исходном проекте решетки крепятся силиконовыми креплениями непосредственно к вентиляторам, а сами вентиляторы удерживаются выступающей частью силиконовых креплений в специально сделанных внутренних пазах корпуса. Таким образом уменьшается передача вибрации от вентиляторов на корпус и далее на аквариум.

Для нестандартных вариантов крепления вентиляторов под крышкой могут помочь фиксирующие скобы ("пряжки") для объединения вентиляторов в блок, кронштейны для аквариумных светильников (например `NICREW`), поликарбонатные (акриловые) трубки (например `Uxcell`).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176419946-210be87c-d86c-44ee-9781-4f2c85e608c7.jpg' alt='фиксирующая скоба ("пряжка") для вентилятора'>
<img src='https://user-images.githubusercontent.com/802583/176419968-289b363c-5eef-466a-a98f-f49d38a931d3.jpg' alt='кронштейны для аквариумных светильников NICREW'>
</p>

Контроллер вентиляторов работает на базе `Arduino Nano` или `Arduino Mini`. Рекомендуется `Arduino Nano`, т.к. для данной платы не потребуется дополнительно приобретать адаптер TTL (в случае его отсутствия). Так же подойдет любая другая плата `ATmega328` (`Arduino Uno`), но из за габаритов ее может не получится разместить в исходном корпусе.

При желании получения доступа по WiFi необходима дополнительная плата `Wi-Fi Wemos D1 Mini` (`ESP8266`). На практике данная возможность полезна только при активной разработке (перепрошивка через `OTA` без необходимости вскрытия корпуса и подключения USB к плате). В обычной же жизни ("один раз настроил и забыл") эта возможность будет настолько редко востребованной, что усложнение схемы ради нее видится нецелесообразным.

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176437296-5058f2da-f202-4d47-b85e-58d308130220.jpg' alt='Arduino Nano'>
<img src='https://user-images.githubusercontent.com/802583/176437305-40df8fe2-0f64-428d-840d-b9b2de378f83.jpg' alt='Wi-Fi Wemos D1 Mini'>
<img src='https://user-images.githubusercontent.com/802583/176437303-bfb67585-aaad-403e-ae47-30e5b7284f23.jpg' alt='DC Power Shield for WEMOS D1 mini'>
</p>

В случае использования двух плат необходим блок питания на 5V. Для этих целей рекомендуется использовать `DC Power Shield for WEMOS D1 mini` (можно использовать любой другой блок питания, но с этим будет удобнее монтаж). В случае использования одноплатной схемы отдельный блок питания так же рекомендуется, но не является обязательным - `Arduino Nano` может быть напрямую запитана от 12V, а мощности ее внутреннего стабилизатора вполне достаточно для питания периферии.

Питание в корпус подается через стандартный разъем 5.5 x 2.1 мм. от внешнего адаптера питания на 12V / 1A (одна плата) или 1.5А (две платы).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176435921-31bfc5c5-c2a6-41b9-904b-b5c28d1fd71a.jpg' alt='адаптер питания 12V / 2A (EU)'>
<img src='https://user-images.githubusercontent.com/802583/176435924-344d8954-a09b-454f-b4db-42d6dd31335e.jpg' alt='коннкетор питания 5.5 x 2.1 мм.'>
</p>

В качестве датчика температуры воды [рекомендуется](sensor-matrix.md) датчик `DS18B20` в пластиковом герметичном исполнении.

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176061942-7fc1686b-409d-42d3-9b99-d59b6e7c94f8.jpg' alt='Taidacent DS18B20'>
<img src='https://user-images.githubusercontent.com/802583/176062148-31206d07-163a-4ebf-9203-18e019fcc9f4.jpg' alt='Sonoff DS18B20'>
</p>

Дополнительно для подключения датчика потребуются плата-адаптер с подтягивающим резистором, 4-pin разъем `PJ-392A` и 4-pin коннектор 3.5 мм. Разъем и коннектор опциональны, но с ними удобно отключать датчик при обслуживании. Распайка коннектора, совместимая с датчиками `Sonoff`, приведена в [схеме](schema.md).

<p align='center'>
<img src='https://user-images.githubusercontent.com/802583/176441328-9a235204-cc30-41e2-a85c-87fbc4d21cda.jpg' alt='адаптер DS18B20'>
<img src='https://user-images.githubusercontent.com/802583/176441329-f8b0a781-8918-4035-a8ab-2a3fd13594ce.jpg' alt='4-pin аудио разъем 3.5 мм.'>
<img src='https://user-images.githubusercontent.com/802583/176441324-5fbc9af7-0d9f-4e32-9823-341c685d4e34.jpg' alt='4-pin аудио коннкетор 3.5 мм.'>
</p>

Опционально:

* Дисплей `SSD1306 128x64` (ПО может работать без дисплея с конфигурацией заданной на этапе компиляции в `config.h`).
* Сенсорные кнопки `TTP223` (имеют смысл только при наличии дисплея).
* Зуммер ("пищалка") `KY-012` (активный, однотонный) или `KY-006` (пассивный, мелодии) - может использоваться для звуковой индикации ошибок или оповещения о событиях (на данный момент не реализовано).

Дополнительно:

* Провода типа `Dupont` и термоусадочные трубки в ассортименте, горячий клеевой пистолет, паяльник и прочие инструменты для монтажа.
